<?xml version="1.0" encoding="utf-8"?>
  <rss version="2.0"
        xmlns:content="http://purl.org/rss/1.0/modules/content/"
        xmlns:atom="http://www.w3.org/2005/Atom"
  >
  <channel>
    <title>守望子的个人博客</title>
    <link href="http://localhost:4000/feed/" rel="self" />
    <link href="http://localhost:4000" />
    <lastBuildDate>2020-04-02T13:47:02+08:00</lastBuildDate>
    <webMaster>jianling.shih@gmail.com</webMaster>
    
    <item>
      <title>map的创建、添加、获取和删除</title>
      <link href="http://localhost:4000/MapsExplained/"/>
      <pubDate>2020-03-03T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/MapsExplained</guid>
      <content:encoded><![CDATA[<p>Go中的map在底层是用哈希表实现的，它具有高效的添加、获取和删除操作。</p>

<h1 id="创建一个新的-map">创建一个新的 map</h1>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="k">var</span> <span class="n">m</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">int</span>                <span class="c">// nil map of string-int pairs</span>
	
	<span class="n">m1</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float64</span><span class="p">)</span>      <span class="c">// Empty map of string-float64 pairs</span>
	<span class="n">m2</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float64</span><span class="p">,</span> <span class="m">100</span><span class="p">)</span> <span class="c">// Preallocate room for 100 entries</span>
	
	<span class="n">m3</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float64</span><span class="p">{</span>           <span class="c">// Map literal</span>
	    <span class="s">"e"</span><span class="o">:</span>  <span class="m">2.71828</span><span class="p">,</span>
	    <span class="s">"pi"</span><span class="o">:</span> <span class="m">3.1416</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">m3</span><span class="p">))</span>                <span class="c">// Size of map: 2</span>
</code></pre></div></div>

<ul>
  <li>一个 map一组键值对的无序集合，每个键值都是唯一的。</li>
  <li>你可以通过 <a href="https://golang.org/pkg/builtin/#make">make</a> 关键字来创建一个 map。</li>
  <li>map的零值为 nil。一个值为nil的 map除了不能添加元素外和一个空的 map 是等效的。如果你试图往一个尚未初始化的 map 中添加元素，将会引发运行时的 panic。</li>
  <li><a href="https://golang.org/pkg/builtin/#len">len</a> 函数可以获取到 map 的大小，即键值对的总数量。</li>
</ul>

<h1 id="map的添加更新获取和删除">map的添加、更新、获取和删除</h1>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">m</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">(</span><span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float64</span><span class="p">)</span>
	
	<span class="n">m</span><span class="p">[</span><span class="s">"pi"</span><span class="p">]</span> <span class="o">=</span> <span class="m">3.14</span>             <span class="c">// Add a new key-value pair</span>
	<span class="n">m</span><span class="p">[</span><span class="s">"pi"</span><span class="p">]</span> <span class="o">=</span> <span class="m">3.1416</span>           <span class="c">// Update value</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>             <span class="c">// Print map: "map[pi:3.1416]"</span>
	
	<span class="n">v</span> <span class="o">:=</span> <span class="n">m</span><span class="p">[</span><span class="s">"pi"</span><span class="p">]</span>               <span class="c">// Get value: v == 3.1416</span>
	<span class="n">v</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">"pie"</span><span class="p">]</span>               <span class="c">// Not found: v == 0 (zero value)</span>
	
	<span class="n">_</span><span class="p">,</span> <span class="n">found</span> <span class="o">:=</span> <span class="n">m</span><span class="p">[</span><span class="s">"pi"</span><span class="p">]</span>        <span class="c">// found == true</span>
	<span class="n">_</span><span class="p">,</span> <span class="n">found</span> <span class="o">=</span> <span class="n">m</span><span class="p">[</span><span class="s">"pie"</span><span class="p">]</span>        <span class="c">// found == false</span>
	
	<span class="k">if</span> <span class="n">x</span><span class="p">,</span> <span class="n">found</span> <span class="o">:=</span> <span class="n">m</span><span class="p">[</span><span class="s">"pi"</span><span class="p">];</span> <span class="n">found</span> <span class="p">{</span>
	    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
	<span class="p">}</span>                           <span class="c">// Prints "3.1416"</span>
	
	<span class="nb">delete</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s">"pi"</span><span class="p">)</span>             <span class="c">// Delete a key-value pair</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>              <span class="c">// Print map: "map[]"</span>
</code></pre></div></div>

<ul>
  <li>当你索引一个map时，你会得到两个返回值;第二个(可选)是一个布尔值，指示键是否存在。</li>
  <li>如果键不存在的话，第一个返回值将会是默认的<a href="https://yourbasic.org/golang/default-zero-value/">零值</a></li>
</ul>

<h1 id="循环遍历map">循环遍历map</h1>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">m</span> <span class="o">:=</span> <span class="k">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="kt">float64</span><span class="p">{</span>
	    <span class="s">"pi"</span><span class="o">:</span> <span class="m">3.1416</span><span class="p">,</span>
	    <span class="s">"e"</span><span class="o">:</span>  <span class="m">2.71828</span><span class="p">,</span>
	<span class="p">}</span>
	<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">m</span><span class="p">)</span> <span class="c">// "map[e:2.71828 pi:3.1416]"</span>
	
	<span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="n">m</span> <span class="p">{</span> <span class="c">// Order not specified </span>
	    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>
	<span class="p">}</span>
</code></pre></div></div>
<ul>
  <li>迭代顺序没有指定，并且可能因迭代而异。</li>
  <li>如果在迭代期间删除了尚未到达的条目，则不会产生相应的迭代值。</li>
  <li>如果一个条目是在迭代期间创建的，那么这个条目可能在迭代期间产生，也可能不产生。</li>
</ul>

<h1 id="map的性能与实现">map的性能与实现</h1>
<ul>
  <li>map的底层是由hash table实现。</li>
  <li>添加、获取和删除操作在恒定的预期时间内运行。添加操作的时间复杂度是平摊的。</li>
  <li>必须为键类型定义运算符 ==和!=。</li>
</ul>

]]></content:encoded>
    </item>
    
    <item>
      <title>什么是随机种子（seed）</title>
      <link href="http://localhost:4000/AlgorithmsSeed/"/>
      <pubDate>2020-03-03T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/AlgorithmsSeed</guid>
      <content:encoded><![CDATA[<p>实际上，伪随机数根本就不是随机的，它们是用一种固定的判定算法计算出来的。</p>

<p>种子是伪随机数序列的起点。如果你从相同的种子开始，你会得到相同的序列。这对于调试非常有用。</p>

<p>如果你希望每次都有不同的数字序列，你可以使用当前时间作为种子。</p>

<h2 id="举例">举例</h2>
<p>下面的生成器会产生97个不同数字的序列，然后重新开始。种子决定了从哪个数字开始序列。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">// New returns a pseudorandom number generator Rand with a given seed.</span>
<span class="c">// Every time you call Rand, you get a new "random" number.</span>
<span class="k">func</span> <span class="n">New</span><span class="p">(</span><span class="n">seed</span> <span class="kt">int</span><span class="p">)</span> <span class="p">(</span><span class="n">Rand</span> <span class="k">func</span><span class="p">()</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">current</span> <span class="o">:=</span> <span class="n">seed</span>
    <span class="k">return</span> <span class="k">func</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
        <span class="n">next</span> <span class="o">:=</span> <span class="p">(</span><span class="m">17</span> <span class="o">*</span> <span class="n">current</span><span class="p">)</span> <span class="o">%</span> <span class="m">97</span>
        <span class="n">current</span> <span class="o">=</span> <span class="n">next</span>
        <span class="k">return</span> <span class="n">next</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">rand1</span> <span class="o">:=</span> <span class="n">New</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">rand1</span><span class="p">(),</span> <span class="n">rand1</span><span class="p">(),</span> <span class="n">rand1</span><span class="p">())</span>

    <span class="n">rand2</span> <span class="o">:=</span> <span class="n">New</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">rand2</span><span class="p">(),</span> <span class="n">rand2</span><span class="p">(),</span> <span class="n">rand2</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>			<span class="m">17</span> <span class="m">95</span> <span class="m">63</span>
			<span class="m">34</span> <span class="m">93</span> <span class="m">29</span>
</code></pre></div></div>

<p>在大多数编程语言中，随机数生成器通常就是这样工作的，当然它们使用了更智能的函数。理想情况下，你希望通过采用一种廉价算术运算来得到一个长序列且具有良好的随机属性。例如，通常希望避免使用取模运算符。</p>

]]></content:encoded>
    </item>
    
    <item>
      <title>Runes and character encoding</title>
      <link href="http://localhost:4000/StringRunes/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/StringRunes</guid>
      <content:encoded><![CDATA[<p>ASCII码定义128个字符，由代码点0-127标识。它包括英文字母、拉丁数字和其他一些字符。</p>

<p>Unicode是ASCII的一个超集，它定义了一个包含1,114,112个码点的codespace。Unicode版本10.0包含139个现代和历史脚本(包括runic字母表，但不包括Klingon)，以及多个符号集。</p>

<h1 id="strings-and-utf-8-encoding">Strings and UTF-8 encoding</h1>

<p>字符串是字节序列 并不是 rune 序列。</p>

<p>但是，字符串通常包含用UTF-8编码的Unicode文本，它使用1到4个字节对所有Unicode码点进行编码。(ASCII字符用一个字节编码，而其他代码点用得更多。)</p>

<p>由于Go源代码本身被编码为UTF-8，字符串文本将自动获得这种编码。</p>

<p>例如，在字符串“cafe”中，字符e(代码点233)使用两个字节进行编码，而ASCII字符c、a和f(代码点99、97和102)只使用一个字节</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="s">"café"</span><span class="p">))</span> <span class="c">// [99 97 102 195 169]</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">([]</span><span class="kt">rune</span><span class="p">(</span><span class="s">"café"</span><span class="p">))</span> <span class="c">// [99 97 102 233]</span>
</code></pre></div></div>

<h1 id="byte-与-rune">[]byte 与 []rune</h1>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="c">// byte is an alias for uint8 and is equivalent to uint8 in all ways. It is</span>
		<span class="c">// used, by convention, to distinguish byte values from 8-bit unsigned</span>
		<span class="c">// integer values.</span>
		<span class="k">type</span> <span class="kt">byte</span> <span class="o">=</span> <span class="kt">uint8</span>
		
		<span class="c">// rune is an alias for int32 and is equivalent to int32 in all ways. It is</span>
		<span class="c">// used, by convention, to distinguish character values from integer values.</span>
		<span class="k">type</span> <span class="kt">rune</span> <span class="o">=</span> <span class="kt">int32</span>
</code></pre></div></div>
<p>原来是 byte 表示一个字节，rune 表示四个字节，那么就可以得出了结论了，来看一段代码，使用中文字符串.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">bj</span> <span class="o">:=</span> <span class="s">"北京欢迎你"</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">([]</span><span class="kt">rune</span><span class="p">(</span><span class="n">bj</span><span class="p">))</span><span class="c">//[21271 20140 27426 36814 20320]</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">([]</span><span class="kt">byte</span><span class="p">(</span><span class="n">bj</span><span class="p">))</span><span class="c">//[229 140 151 228 186 172 230 172 162 232 191 142 228 189 160]</span>
</code></pre></div></div>
<p>这里可以看出中文字符串每个占3个字节。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">res</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">rune</span><span class="p">(</span><span class="s">"北京欢迎你"</span><span class="p">)</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">string</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="o">:</span><span class="m">2</span><span class="p">]))</span><span class="c">//北京</span>
</code></pre></div></div>

]]></content:encoded>
    </item>
    
    <item>
      <title>生成一个唯一的字符串</title>
      <link href="http://localhost:4000/RandomNumberUnique/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/RandomNumberUnique</guid>
      <content:encoded><![CDATA[<p>全球唯一标识符(<a href="https://en.wikipedia.org/wiki/Universally_unique_identifier">UUID</a>)或全球唯一标识符(GUID)是一个用于标识信息的128位数字。</p>

<ul>
  <li>uuid实际的目的是唯一的:它被复制的可能性几乎趋于0。</li>
  <li>uuid 不依赖于中央权威，也不依赖于生成 uuid 的那些机构之间的协调。</li>
</ul>

<p>UUID 字符串表现是由32个十六制数字组成，分为5组，用连接符分割。例如：</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="m">123e4567</span><span class="o">-</span><span class="n">e89b</span><span class="o">-</span><span class="m">12</span><span class="n">d3</span><span class="o">-</span><span class="n">a456</span><span class="o">-</span><span class="m">426655440000</span>
</code></pre></div></div>

<h1 id="uuid生成器-举例">UUID生成器 举例</h1>
<p>可以通过使用 <a href="https://golang.org/pkg/crypto/rand/">crypto/rand</a> 包的 <a href="https://golang.org/pkg/crypto/rand/#Read">rand.Read</a>方法来创建一个 uuid。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">b</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="m">16</span><span class="p">)</span>
		<span class="n">_</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
		<span class="p">}</span>
		<span class="n">uuid</span> <span class="o">:=</span> <span class="n">fmt</span><span class="o">.</span><span class="n">Sprintf</span><span class="p">(</span><span class="s">"%x-%x-%x-%x-%x"</span><span class="p">,</span>
			<span class="n">b</span><span class="p">[</span><span class="m">0</span><span class="o">:</span><span class="m">4</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="m">4</span><span class="o">:</span><span class="m">6</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="m">6</span><span class="o">:</span><span class="m">8</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="m">8</span><span class="o">:</span><span class="m">10</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="m">10</span><span class="o">:</span><span class="p">])</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">uuid</span><span class="p">)</span> <span class="c">//d37a5f14-ee89-241a-43e6-ba84d527a095</span>
</code></pre></div></div>
<h4 id="限制">限制</h4>
<p>这个UUID不符合<a href="https://tools.ietf.org/html/rfc4122">RFC 4122</a>。特别地，它不包含任何版本号或变体号。</p>

]]></content:encoded>
    </item>
    
    <item>
      <title>生成随机字符串（密码）</title>
      <link href="http://localhost:4000/RandomNumberString/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/RandomNumberString</guid>
      <content:encoded><![CDATA[<h1 id="随机字符串">随机字符串</h1>
<p>从瑞典字母(包括非ascii字符å, ä 和 ö))中生成随机的数字和字符字符串。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">rand</span><span class="o">.</span><span class="n">Seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">())</span>
		<span class="n">chars</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">rune</span><span class="p">(</span><span class="s">"ABCDEFGHIJKLMNOPQRSTUVWXYZÅÄÖ"</span> <span class="o">+</span>
			<span class="s">"abcdefghijklmnopqrstuvwxyzåäö"</span> <span class="o">+</span>
			<span class="s">"0123456789"</span><span class="p">)</span>
		<span class="n">length</span> <span class="o">:=</span> <span class="m">8</span>
		<span class="k">var</span> <span class="n">b</span> <span class="n">strings</span><span class="o">.</span><span class="n">Builder</span>
		<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="n">b</span><span class="o">.</span><span class="n">WriteRune</span><span class="p">(</span><span class="n">chars</span><span class="p">[</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">))])</span>
		<span class="p">}</span>
		<span class="n">str</span> <span class="o">:=</span> <span class="n">b</span><span class="o">.</span><span class="n">String</span><span class="p">()</span> <span class="c">// E.g. "PsVwäDFU"</span>
</code></pre></div></div>

<h1 id="带约束的随机字符串">带约束的随机字符串</h1>
<p>以下代码演示生成一个随机ASCII字符串，该字符串至少包含一个数字和一个特殊字符。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">rand</span><span class="o">.</span><span class="n">Seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">())</span>
		<span class="n">digits</span> <span class="o">:=</span> <span class="s">"0123456789"</span>
		<span class="n">specials</span> <span class="o">:=</span> <span class="s">"~=+%^*/()[]{}/!@#$?|"</span>
		<span class="n">all</span> <span class="o">:=</span> <span class="s">"ABCDEFGHIJKLMNOPQRSTUVWXYZ"</span> <span class="o">+</span>
			<span class="s">"abcdefghijklmnopqrstuvwxyz"</span> <span class="o">+</span>
			<span class="n">digits</span> <span class="o">+</span> <span class="n">specials</span>
		<span class="n">length</span> <span class="o">:=</span> <span class="m">8</span>
		<span class="n">buf</span> <span class="o">:=</span> <span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span> <span class="n">length</span><span class="p">)</span>
		<span class="n">buf</span><span class="p">[</span><span class="m">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">digits</span><span class="p">[</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">digits</span><span class="p">))]</span>
		<span class="n">buf</span><span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">specials</span><span class="p">[</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">specials</span><span class="p">))]</span>
		<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="m">2</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span> <span class="p">{</span>
			<span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">all</span><span class="p">[</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">all</span><span class="p">))]</span>
		<span class="p">}</span>
		<span class="n">rand</span><span class="o">.</span><span class="n">Shuffle</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">buf</span><span class="p">),</span> <span class="k">func</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">buf</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">buf</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">buf</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
		<span class="p">})</span>
		<span class="n">str</span> <span class="o">:=</span> <span class="kt">string</span><span class="p">(</span><span class="n">buf</span><span class="p">)</span> <span class="c">// E.g. "$Lu2y/6+"</span>
</code></pre></div></div>

]]></content:encoded>
    </item>
    
    <item>
      <title>打乱切片或数组的顺序</title>
      <link href="http://localhost:4000/RandomNumberShuffle/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/RandomNumberShuffle</guid>
      <content:encoded><![CDATA[<p><a href="https://golang.org/pkg/math/rand/">math/rand</a> 包中方法 <a href="https://golang.org/pkg/math/rand/#Shuffle">rand.Shuffle</a> 会通过指定的交换函数打乱数组的输入序列即进行洗牌。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">a</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">}</span>
		<span class="n">rand</span><span class="o">.</span><span class="n">Seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">())</span>
		<span class="n">rand</span><span class="o">.</span><span class="n">Shuffle</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="k">func</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="kt">int</span><span class="p">)</span> <span class="p">{</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="p">})</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="c">//[4 7 6 1 3 5 8 2]</span>

</code></pre></div></div>

<h4 id="go-110-之前">Go 1.10 之前</h4>
<p>会使用  <a href="https://golang.org/pkg/math/rand/">math/rand</a> 包中的 <a href="https://golang.org/pkg/math/rand/#Seed">rand.Seed</a> 和 <a href="https://golang.org/pkg/math/rand/#Intn">rand.Intn</a> 函数来打乱切片的顺序。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">a</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">,</span> <span class="m">4</span><span class="p">,</span> <span class="m">5</span><span class="p">,</span> <span class="m">6</span><span class="p">,</span> <span class="m">7</span><span class="p">,</span> <span class="m">8</span><span class="p">}</span>
		<span class="n">rand</span><span class="o">.</span><span class="n">Seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">())</span>
		<span class="k">for</span> <span class="n">i</span> <span class="o">:=</span> <span class="nb">len</span><span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="o">-</span> <span class="m">1</span><span class="p">;</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="m">0</span><span class="p">;</span> <span class="n">i</span><span class="o">--</span> <span class="p">{</span> <span class="c">// Fisher–Yates shuffle</span>
		    <span class="n">j</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="n">i</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span>
		    <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">j</span><span class="p">],</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
		<span class="p">}</span>
</code></pre></div></div>
]]></content:encoded>
    </item>
    
    <item>
      <title>生成随机数、字符和切片元素</title>
      <link href="http://localhost:4000/RandomNumberRandom/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/RandomNumberRandom</guid>
      <content:encoded><![CDATA[<h1 id="go伪随机数">Go伪随机数</h1>
<p>可以使用 <a href="https://golang.org/pkg/math/rand/">math/rand</a> 包内的 <a href="https://golang.org/pkg/math/rand/#Seed">rand.Seed</a> 和 <a href="rand.Int63">rand.Int63</a> 方法来生成一个非负的int64型的伪随机数。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">rand</span><span class="o">.</span><span class="n">Seed</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">())</span>
	<span class="n">n</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Int63</span><span class="p">()</span> <span class="c">// for example 4601851300195147788</span>
</code></pre></div></div>
<p>同样的，可以调用 rand.Float64 来生成一个浮点数 a , 0 ≤ a &lt; 1</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>	<span class="n">x</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span> <span class="c">// for example 0.49893371771268225</span>
</code></pre></div></div>
<h3 id="随机源">随机源</h3>
<p><a href="https://golang.org/pkg/math/rand/">math/rand</a> 包内的方法都使用同一个随机源。</p>

<p>如果需要，您可以自己设置一个随机种子并创建一个新的<a href="https://golang.org/pkg/math/rand/#Rand">Rand</a>类型的随机生成器，并用它的方法来生成随机数。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">generator</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">NewSource</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">UnixNano</span><span class="p">()))</span>
		<span class="n">n</span> <span class="o">:=</span> <span class="n">generator</span><span class="o">.</span><span class="n">Int63</span><span class="p">()</span>
		<span class="n">x</span> <span class="o">:=</span> <span class="n">generator</span><span class="o">.</span><span class="n">Float64</span><span class="p">()</span>

</code></pre></div></div>

<h1 id="给定范围内生成随机数或字符">给定范围内生成随机数或字符</h1>

<h3 id="a-到-b-之间的数字">a 到 b 之间的数字</h3>

<p>调用函数 <a href="rand.Intn(m)">rand.Intn(m)</a> 将会返回随机数 n ，并且 0 ≤ n &lt; m.</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">n</span> <span class="o">:=</span> <span class="n">a</span> <span class="o">+</span> <span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="n">b</span><span class="o">-</span><span class="n">a</span><span class="o">+</span><span class="m">1</span><span class="p">)</span> <span class="c">// a ≤ n ≤ b</span>
</code></pre></div></div>

<h3 id="a-到-z-之间的字符">a 到 z 之间的字符</h3>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">c</span> <span class="o">:=</span> <span class="sc">'a'</span> <span class="o">+</span> <span class="kt">rune</span><span class="p">(</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="sc">'z'</span><span class="o">-</span><span class="sc">'a'</span><span class="o">+</span><span class="m">1</span><span class="p">))</span> <span class="c">// 'a' ≤ c ≤ 'z'</span>
</code></pre></div></div>

<h1 id="随机切片元素">随机切片元素</h1>
<p>可以通过选定一个随机的索引来从任意一个切片中生成一个字符。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">chars</span> <span class="o">:=</span> <span class="p">[]</span><span class="kt">rune</span><span class="p">(</span><span class="s">"AB⌘"</span><span class="p">)</span>
		<span class="n">c</span> <span class="o">:=</span> <span class="n">chars</span><span class="p">[</span><span class="n">rand</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">chars</span><span class="p">))]</span> <span class="c">// for example '⌘'</span>
</code></pre></div></div>

]]></content:encoded>
    </item>
    
    <item>
      <title>容易使用的加密rand包</title>
      <link href="http://localhost:4000/RandomNumberCrypto/"/>
      <pubDate>2020-03-02T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/RandomNumberCrypto</guid>
      <content:encoded><![CDATA[<p>Go 提供了两个生成随机数的包。</p>

<ul>
  <li><a href="https://golang.org/pkg/math/rand/">math/rand</a>实现了伪随机数生成器。</li>
  <li><a href="https://golang.org/pkg/crypto/rand/">crypto/rand</a>使用有限的接口实现加密安全的伪随机数生成器。</li>
</ul>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="p">(</span>
    <span class="n">crand</span> <span class="s">"crypto/rand"</span>
    <span class="n">rand</span> <span class="s">"math/rand"</span>

    <span class="s">"encoding/binary"</span>
    <span class="s">"fmt"</span>
    <span class="s">"log"</span>
<span class="p">)</span>

<span class="k">func</span> <span class="n">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="n">src</span> <span class="n">cryptoSource</span>
    <span class="n">rnd</span> <span class="o">:=</span> <span class="n">rand</span><span class="o">.</span><span class="n">New</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
    <span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">rnd</span><span class="o">.</span><span class="n">Intn</span><span class="p">(</span><span class="m">1000</span><span class="p">))</span> <span class="c">// a truly random number 0 to 999</span>
<span class="p">}</span>

<span class="k">type</span> <span class="n">cryptoSource</span> <span class="k">struct</span><span class="p">{}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="n">cryptoSource</span><span class="p">)</span> <span class="n">Seed</span><span class="p">(</span><span class="n">seed</span> <span class="kt">int64</span><span class="p">)</span> <span class="p">{}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="n">cryptoSource</span><span class="p">)</span> <span class="n">Int63</span><span class="p">()</span> <span class="kt">int64</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kt">int64</span><span class="p">(</span><span class="n">s</span><span class="o">.</span><span class="n">Uint64</span><span class="p">()</span> <span class="o">&amp;</span> <span class="o">^</span><span class="kt">uint64</span><span class="p">(</span><span class="m">1</span><span class="o">&lt;&lt;</span><span class="m">63</span><span class="p">))</span>
<span class="p">}</span>

<span class="k">func</span> <span class="p">(</span><span class="n">s</span> <span class="n">cryptoSource</span><span class="p">)</span> <span class="n">Uint64</span><span class="p">()</span> <span class="p">(</span><span class="n">v</span> <span class="kt">uint64</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">err</span> <span class="o">:=</span> <span class="n">binary</span><span class="o">.</span><span class="n">Read</span><span class="p">(</span><span class="n">crand</span><span class="o">.</span><span class="n">Reader</span><span class="p">,</span> <span class="n">binary</span><span class="o">.</span><span class="n">BigEndian</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">err</span> <span class="o">!=</span> <span class="no">nil</span> <span class="p">{</span>
        <span class="n">log</span><span class="o">.</span><span class="n">Fatal</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="n">v</span>
<span class="p">}</span>
</code></pre></div></div>
]]></content:encoded>
    </item>
    
    <item>
      <title>如何找到星期几</title>
      <link href="http://localhost:4000/TimeDateWeek/"/>
      <pubDate>2020-03-01T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/TimeDateWeek</guid>
      <content:encoded><![CDATA[<p>函数<a href="https://golang.org/pkg/time/#Time.Weekday">Weekday</a>用于返回一周中的星期几。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="k">func</span> <span class="p">(</span><span class="n">t</span> <span class="n">Time</span><span class="p">)</span> <span class="n">Weekday</span><span class="p">()</span> <span class="n">Weekday</span>
</code></pre></div></div>

<p>使用:</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">weekday</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">()</span><span class="o">.</span><span class="n">Weekday</span><span class="p">()</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">weekday</span><span class="p">)</span>      <span class="c">// "Tuesday"</span>
		<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="kt">int</span><span class="p">(</span><span class="n">weekday</span><span class="p">))</span> <span class="c">// "2"	</span>
		
</code></pre></div></div>

<h2 id="type-weekday">Type Weekday</h2>

<p><a href="https://golang.org/pkg/time/#Weekday">time.Weekday</a>用来描述星期 比如礼拜天 Sunday=0…</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">type</span> <span class="n">Weekday</span> <span class="kt">int</span>

		<span class="k">const</span> <span class="p">(</span>
			<span class="n">Sunday</span> <span class="n">Weekday</span> <span class="o">=</span> <span class="no">iota</span>
			<span class="n">Monday</span>
			<span class="n">Tuesday</span>
			<span class="n">Wednesday</span>
			<span class="n">Thursday</span>
			<span class="n">Friday</span>
			<span class="n">Saturday</span>
		<span class="p">)</span>
</code></pre></div></div>

]]></content:encoded>
    </item>
    
    <item>
      <title>时区</title>
      <link href="http://localhost:4000/TimeDateTimeZone/"/>
      <pubDate>2020-03-01T00:00:00+08:00</pubDate>
      <author>cmis110</author>
      <guid>http://localhost:4000/TimeDateTimeZone</guid>
      <content:encoded><![CDATA[<p>每个 <a href="https://golang.org/pkg/time/#Time">Time</a>都与一个<a href="https://golang.org/pkg/time/#Location">Location</a>关联，用于时区的展示。</p>

<p>方法<a href="https://golang.org/pkg/time/#Time.In">In</a>会返回一个特定位置的时间。在这种方式下改变地理位置只会改变时间的表达方式，并不会真正改变当下描述的时间。</p>

<p>TimeIn 这个函数会方便的改变时间的时区。</p>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c">// TimeIn returns the time in UTC if the name is "" or "UTC".</span>
    <span class="c">// It returns the local time if the name is "Local".</span>
    <span class="c">// Otherwise, the name is taken to be a location name in</span>
    <span class="c">// the IANA Time Zone database, such as "Africa/Lagos".</span>
    <span class="k">func</span> <span class="n">TimeIn</span><span class="p">(</span><span class="n">t</span> <span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">,</span> <span class="n">name</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Time</span><span class="p">,</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">loc</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">time</span><span class="o">.</span><span class="n">LoadLocation</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
            <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">In</span><span class="p">(</span><span class="n">loc</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="n">t</span><span class="p">,</span> <span class="n">err</span>
    <span class="p">}</span>
</code></pre></div></div>

<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code> 	<span class="k">for</span> <span class="n">_</span><span class="p">,</span> <span class="n">name</span> <span class="o">:=</span> <span class="k">range</span> <span class="p">[]</span><span class="kt">string</span><span class="p">{</span>
		<span class="s">""</span><span class="p">,</span>
		<span class="s">"Local"</span><span class="p">,</span>
		<span class="s">"Asia/Shanghai"</span><span class="p">,</span>
		<span class="s">"America/Metropolis"</span><span class="p">,</span>
	<span class="p">}</span> <span class="p">{</span>
		<span class="n">t</span><span class="p">,</span> <span class="n">err</span> <span class="o">:=</span> <span class="n">TimeIn</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">Now</span><span class="p">(),</span> <span class="n">name</span><span class="p">)</span>
		<span class="k">if</span> <span class="n">err</span> <span class="o">==</span> <span class="no">nil</span> <span class="p">{</span>
			<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">Location</span><span class="p">(),</span> <span class="n">t</span><span class="o">.</span><span class="n">Format</span><span class="p">(</span><span class="s">"15:04"</span><span class="p">))</span>
		<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
			<span class="n">fmt</span><span class="o">.</span><span class="n">Println</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="s">""</span><span class="p">)</span>
		<span class="p">}</span>
	<span class="p">}</span>
</code></pre></div></div>
<div class="language-go highlighter-rouge"><div class="highlight"><pre class="highlight"><code>		<span class="n">UTC</span> <span class="m">09</span><span class="o">:</span><span class="m">09</span>
		<span class="n">Local</span> <span class="m">17</span><span class="o">:</span><span class="m">09</span>
		<span class="n">Asia</span><span class="o">/</span><span class="n">Shanghai</span> <span class="m">17</span><span class="o">:</span><span class="m">09</span>
		<span class="n">America</span><span class="o">/</span><span class="n">Metropolis</span> 
</code></pre></div></div>

<p><a href="https://golang.org/pkg/time/#Date">package time :Date</a></p>

]]></content:encoded>
    </item>
    
  </channel>
</rss>
